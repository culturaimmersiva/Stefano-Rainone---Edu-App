<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>La Mia Classe - Edu App Dinamica</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Aggiunto per il responsive -->
    <style>
        /* Styles CSS */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        
        header {
            background-color: #3c78d8;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        nav {
            background-color: #f1f1f1;
            overflow: hidden;
            display: none; /* Nascosto fino al login */
        }
        
        nav ul {
            list-style-type: none;
            margin: 0;
            padding: 0;
            display: flex;
            flex-wrap: wrap; /* Per adattarsi su schermi piccoli */
        }
        
        nav li {
            flex: 1 1 auto;
            text-align: center;
        }
        
        nav li a {
            display: block;
            color: #000;
            padding: 14px 16px;
            text-decoration: none;
        }
        
        nav li a:hover {
            background-color: #ddd;
        }
        
        main {
            padding: 20px;
        }
        
        section {
            margin-bottom: 40px;
        }
        
        footer {
            background-color: #3c78d8;
            color: white;
            text-align: center;
            padding: 10px;
            position: relative;
            bottom: 0;
            width: 100%;
        }
        
        /* Aggiunta per migliorare la visualizzazione */
        .assignment, .announcement {
            border: 1px solid #ccc;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer; /* Indica che è cliccabile */
        }
        
        /* Stili per il login */
        #login {
            max-width: 300px;
            margin: 100px auto;
            text-align: center;
        }
        
        #login button {
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            width: 100%; /* Adatta i pulsanti alla larghezza del contenitore */
            box-sizing: border-box;
        }
        
        /* Form per creare assegnazioni */
        #create-assignment {
            margin-bottom: 30px;
        }
        
        #create-assignment input, #create-assignment select, #create-assignment button {
            padding: 10px;
            margin: 5px 0;
            width: 100%; /* Adatta gli input alla larghezza del contenitore */
            box-sizing: border-box;
        }
        
        /* Pulsante Indietro */
        .back-button {
            display: inline-block;
            margin-bottom: 20px;
            padding: 10px 15px;
            background-color: #3c78d8;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
        
        /* Responsive adjustments */
        @media screen and (max-width: 600px) {
            nav ul {
                flex-direction: column;
            }
            
            header, footer {
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>La Mia Classe - Edu App Dinamica</h1>
    </header>
    <nav>
        <ul>
            <li><a href="#" id="nav-stream">Stream</a></li>
            <li><a href="#" id="nav-assignments">Lavori del corso</a></li>
            <li><a href="#" id="nav-people">Persone</a></li>
            <li><a href="#" id="nav-grades">Voti</a></li>
            <li><a href="#" id="nav-logout">Logout</a></li>
        </ul>
    </nav>
    <main>
        <!-- Sezione di login -->
        <section id="login">
            <h2>Accedi come:</h2>
            <button id="login-teacher">Insegnante</button>
            <button id="login-student">Studente</button>
        </section>
        
        <!-- Sezioni per insegnanti e studenti -->
        <section id="teacher-section" style="display:none;">
            <a href="#" class="back-button" id="teacher-back" style="display:none;">Indietro</a>
            <h2>Benvenuto, Insegnante!</h2>
            <div id="create-assignment">
                <h3>Crea una nuova assegnazione</h3>
                <input type="text" id="assignment-title" placeholder="Titolo">
                <input type="date" id="assignment-due-date">
                <button id="add-assignment">Aggiungi Assegnazione</button>
            </div>
            <div id="assignments">
                <h3>Assegnazioni Create</h3>
                <!-- Assegnazioni create dall'insegnante -->
            </div>
        </section>
        
        <section id="student-section" style="display:none;">
            <a href="#" class="back-button" id="student-back" style="display:none;">Indietro</a>
            <h2>Benvenuto, Studente!</h2>
            <div id="assignments">
                <h3>Le tue Assegnazioni</h3>
                <!-- Assegnazioni assegnate allo studente -->
            </div>
        </section>
        
        <!-- Dettagli Assegnazione -->
        <section id="assignment-detail" style="display:none;">
            <a href="#" class="back-button" id="detail-back">Indietro</a>
            <div id="assignment-content">
                <!-- Dettagli dell'assegnazione -->
            </div>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 La Mia Classe - Edu App Dinamica</p>
    </footer>

    <script>
        // JavaScript per gestire il login e le funzionalità dinamiche
        document.addEventListener('DOMContentLoaded', () => {
            const loginSection = document.getElementById('login');
            const nav = document.querySelector('nav');
            const teacherSection = document.getElementById('teacher-section');
            const studentSection = document.getElementById('student-section');
            const assignmentDetailSection = document.getElementById('assignment-detail');
            const loginTeacherBtn = document.getElementById('login-teacher');
            const loginStudentBtn = document.getElementById('login-student');
            const navLogout = document.getElementById('nav-logout');
            const teacherBackBtn = document.getElementById('teacher-back');
            const studentBackBtn = document.getElementById('student-back');
            const detailBackBtn = document.getElementById('detail-back');

            let userRole = ''; // 'teacher' o 'student'

            // Simulazione dati
            let assignments = [];
            let students = ['Studente1', 'Studente2', 'Studente3'];
            let studentAssignments = {};

            // Funzione per mostrare la sezione corretta dopo il login
            function showSection() {
                loginSection.style.display = 'none';
                nav.style.display = 'block';
                assignmentDetailSection.style.display = 'none';

                if (userRole === 'teacher') {
                    teacherSection.style.display = 'block';
                    studentSection.style.display = 'none';
                    renderTeacherAssignments();
                } else if (userRole === 'student') {
                    teacherSection.style.display = 'none';
                    studentSection.style.display = 'block';
                    renderStudentAssignments();
                }
            }

            // Event listener per il login insegnante
            loginTeacherBtn.addEventListener('click', () => {
                userRole = 'teacher';
                showSection();
            });

            // Event listener per il login studente
            loginStudentBtn.addEventListener('click', () => {
                userRole = 'student';
                showSection();
            });

            // Event listener per il logout
            navLogout.addEventListener('click', () => {
                userRole = '';
                loginSection.style.display = 'block';
                nav.style.display = 'none';
                teacherSection.style.display = 'none';
                studentSection.style.display = 'none';
                assignmentDetailSection.style.display = 'none';
            });

            // Funzione per l'insegnante per aggiungere una nuova assegnazione
            const addAssignmentBtn = document.getElementById('add-assignment');
            addAssignmentBtn.addEventListener('click', () => {
                const title = document.getElementById('assignment-title').value;
                const dueDate = document.getElementById('assignment-due-date').value;

                if (title && dueDate) {
                    const newAssignment = {
                        id: assignments.length + 1,
                        title,
                        dueDate,
                        description: 'Descrizione dell\'assegnazione: ' + title
                    };
                    assignments.push(newAssignment);

                    // Assegna l'assegnazione a tutti gli studenti
                    students.forEach(student => {
                        if (!studentAssignments[student]) {
                            studentAssignments[student] = [];
                        }
                        studentAssignments[student].push(newAssignment);
                    });

                    // Resetta i campi del form
                    document.getElementById('assignment-title').value = '';
                    document.getElementById('assignment-due-date').value = '';

                    renderTeacherAssignments();
                    alert('Assegnazione creata e assegnata agli studenti!');
                } else {
                    alert('Per favore, compila tutti i campi.');
                }
            });

            // Funzione per visualizzare le assegnazioni dell'insegnante
            function renderTeacherAssignments() {
                const assignmentsDiv = teacherSection.querySelector('#assignments');
                assignmentsDiv.innerHTML = '<h3>Assegnazioni Create</h3>';

                assignments.forEach(assignment => {
                    const div = document.createElement('div');
                    div.classList.add('assignment');
                    div.innerHTML = `
                        <h4>${assignment.title}</h4>
                        <p>Scadenza: ${assignment.dueDate}</p>
                    `;
                    div.addEventListener('click', () => {
                        showAssignmentDetail(assignment);
                    });
                    assignmentsDiv.appendChild(div);
                });
            }

            // Funzione per visualizzare le assegnazioni dello studente
            function renderStudentAssignments() {
                const assignmentsDiv = studentSection.querySelector('#assignments');
                assignmentsDiv.innerHTML = '<h3>Le tue Assegnazioni</h3>';

                const studentName = 'Studente1'; // Simulazione nome studente
                const assignmentsList = studentAssignments[studentName] || [];

                assignmentsList.forEach(assignment => {
                    const div = document.createElement('div');
                    div.classList.add('assignment');
                    div.innerHTML = `
                        <h4>${assignment.title}</h4>
                        <p>Scadenza: ${assignment.dueDate}</p>
                    `;
                    div.addEventListener('click', () => {
                        showAssignmentDetail(assignment);
                    });
                    assignmentsDiv.appendChild(div);
                });
            }

            // Funzione per mostrare i dettagli dell'assegnazione
            function showAssignmentDetail(assignment) {
                teacherSection.style.display = 'none';
                studentSection.style.display = 'none';
                assignmentDetailSection.style.display = 'block';

                const assignmentContent = document.getElementById('assignment-content');
                assignmentContent.innerHTML = `
                    <h3>${assignment.title}</h3>
                    <p>Scadenza: ${assignment.dueDate}</p>
                    <p>${assignment.description}</p>
                `;
            }

            // Event listener per i pulsanti Indietro
            detailBackBtn.addEventListener('click', (e) => {
                e.preventDefault();
                showSection();
            });

            // Aggiornamento per mostrare il pulsante Indietro solo quando necessario
            function updateBackButton() {
                if (userRole === 'teacher') {
                    teacherBackBtn.style.display = assignmentDetailSection.style.display === 'block' ? 'inline-block' : 'none';
                } else if (userRole === 'student') {
                    studentBackBtn.style.display = assignmentDetailSection.style.display === 'block' ? 'inline-block' : 'none';
                }
            }

            // Aggiorna il pulsante Indietro quando la sezione cambia
            const observer = new MutationObserver(updateBackButton);
            observer.observe(assignmentDetailSection, { attributes: true, attributeFilter: ['style'] });
        });
    </script>
</body>
</html>
